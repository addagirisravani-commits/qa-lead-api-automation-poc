package com.sravani.qa.poc.tests;

import com.sravani.qa.poc.config.Config;
import io.restassured.response.Response;

import static io.restassured.RestAssured.*;
import static org.hamcrest.Matchers.*;

import org.testng.annotations.Test;

public class ReqresAPITests {

     @Test
    public void testCreateUser() {
        System.out.println("Create User Test Running");
    }

    @Test
    public void testCreateUser_ShouldReturn201() {
        System.out.println("=== Starting test: Create User ===");
        System.out.println("Sending POST request to create user: " + Config.USER_NAME + ", Job: " + Config.USER_JOB);

        String requestBody = "{ \"name\": \"" + Config.USER_NAME + "\", \"job\": \"" + Config.USER_JOB + "\" }";

        Response response = given()
                .header("Content-Type", "application/json")
                .body(requestBody)
            .when()
                .post(Config.BASE_URL + "/users");

        System.out.println("Response received: " + response.asString());
        System.out.println("Validating status code and response body...");

        response.then()
                .statusCode(201)
                .body("name", equalTo(Config.USER_NAME))
                .body("job", equalTo(Config.USER_JOB))
                .header("Content-Type", equalTo("application/json; charset=utf-8"));

        System.out.println("=== Test Completed: Create User ===\n");
    }

    @Test
    public void testGetUser_ExistingId_ShouldReturn200() {
        System.out.println("=== Starting test: Get Existing User ===");
        System.out.println("Sending GET request for existing user ID: " + Config.EXISTING_USER_ID);

        Response response = given()
                .header("Content-Type", "application/json")
            .when()
                .get(Config.BASE_URL + "/users/" + Config.EXISTING_USER_ID);

        System.out.println("Response received: " + response.asString());
        System.out.println("Validating status code and response body...");

        response.then()
                .statusCode(200)
                .body("data.id", equalTo(Config.EXISTING_USER_ID));

        System.out.println("=== Test Completed: Get Existing User ===\n");
    }

    @Test
    public void testGetUser_NonExistingId_ShouldReturn404() {
        System.out.println("=== Starting test: Get Non-Existing User ===");
        System.out.println("Sending GET request for non-existing user ID: " + Config.NON_EXISTING_USER_ID);

        Response response = given()
                .header("Content-Type", "application/json")
            .when()
                .get(Config.BASE_URL + "/users/" + Config.NON_EXISTING_USER_ID);

        System.out.println("Response received: " + response.asString());
        System.out.println("Validating status code...");

        response.then()
                .statusCode(404);

        System.out.println("=== Test Completed: Get Non-Existing User ===\n");
    }
}
